!function(t){var o={};function i(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=o,i.d=function(n,e,t){i.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)i.d(t,o,function(n){return e[n]}.bind(null,o));return t},i.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(e,"a",e),e},i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.p="",i(i.s=0)}([function(n,e){!function(o,i){let e,u,l,p,r,a,s,c,b,g,d,f,h="http://luntests.com",A=!1,m=[],v=[],t=[];function x(n){return o.btoa(o.unescape(encodeURIComponent(n)))}function y(n){return decodeURIComponent(o.escape(o.atob(n)))}function w(n){const e=x(JSON.stringify(n)),t=parseInt(e.length/3),o=e.substr(0,t),i=e.substr(t,t),r=e.substr(2*t,e.length);return{a:x(n.aid),b:o,c:i,d:r}}function k(n,e,t,o){$.ajax({type:"post",contentType:"application/json;charset=UTF-8",url:e+"/lun/hk2",data:JSON.stringify(w(n)),cache:!1,crossDomain:1==!i.all,success:function(e){if(console.log(e),"E200"===e.code)try{e.data=e.data?y(e.data):null,console.log(e.data),t(e)}catch(n){t(e)}t(e)},fail:function(n){o(n)}})}function _(n){let e;e=n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageX:n.clientX,a=Math.floor(e-l.bar_area[0].getBoundingClientRect().left),c=(new Date).getTime(),n.stopPropagation(),A=!0}function T(e){let t;if(A){t=e.touches?e.touches[0].pageX:e.clientX;let n=t-l.bar_area[0].getBoundingClientRect().left;n>=l.bar_area[0].offsetWidth-(50-a)&&(n=l.bar_area[0].offsetWidth-(50-a)),n<=a&&(n=a),l.move_block.css("left",n-a+"px"),l.left_bar.css("width",n-a+"px"),l.sub_block.css("left","0px"),s=n-a,s>1?(l.msg.text(""),l.move_block.css("background-color","#337ab7"),l.left_bar.css("border-color","#337AB7"),l.icon.css("color","#fff")):(l.move_block.css("background-color","#fff"),l.left_bar.css("border-color","#ddd"),l.icon.css("color","black"))}}function I(){if(endMovetime=(new Date).getTime(),A){s=310*s/parseInt(r.img_width);const n={token:p,aid:u,pointList:[{x:s,y:5}],ts:Date.now()};if(s<1||isNaN(s))return A=!1,s=0,void(a=0);k(n,h,function(n){console.log(n.data),s=0,a=0,"E200"===n.code?(l.move_block.css("background-color","#5cb85c"),l.left_bar.css({"border-color":"#5cb85c","background-color":"#fff"}),l.icon.css("color","#fff"),l.icon.removeClass("lun-dun-icon-right"),l.icon.addClass("lun-dun-icon-check"),l.tips.addClass("lun-dun-suc-bg").removeClass("lun-dun-err-bg"),l.tips.animate({bottom:"0px"}),l.tips.text(((endMovetime-c)/1e3).toFixed(2)+"s验证成功"),setTimeout(function(){l.lun_panel.css("display","none")},1e3),f.success({captchaVerification:n.data})):(l.move_block.css("background-color","#d9534f"),l.left_bar.css("border-color","#d9534f"),l.icon.css("color","#fff"),l.icon.removeClass("lun-dun-icon-right"),l.icon.addClass("lun-dun-icon-close"),l.tips.addClass("lun-dun-err-bg").removeClass("lun-dun-suc-bg"),l.tips.animate({bottom:"0px"}),l.tips.text(n.msg),setTimeout(function(){Y(),l.tips.animate({bottom:"-35px"})},1e3))}),A=!1}}function L(n,e){const t=e||o.event;i.documentElement.scrollLeft||i.body.scrollLeft,i.documentElement.scrollTop||i.body.scrollTop;return{x:t.clientX-($(n).offset().left-$(o).scrollLeft()),y:t.clientY-($(n).offset().top-$(o).scrollTop())}}function M(n){return l.img_panel.append('<div class="lun-dun-point-area" style="background-color:#1abd6c;color:#fff;z-index:9999;width:20px;height:20px;text-align:center;line-height:20px;border-radius: 50%;position:absolute;top:'+parseInt(n.y-10)+"px;left:"+parseInt(n.x-10)+'px;">'+d+"</div>"),++d}function E(n,e){var t;g.push(L(n,e)),d===b&&(d=M(L(n,e)),t=r,g=g.map(function(n){return{x:Math.round(310*n.x/parseInt(t.img_width)),y:Math.round(155*n.y/parseInt(t.img_height))}}),setTimeout(function(){k({token:p,pointList:g,aid:u,ts:Date.now()},h,function(n){"E200"===n.code?(l.bar_area.css({color:"#4cae4c","border-color":"#5cb85c"}),l.msg.text("验证成功"),l.img_panel.unbind("click"),setTimeout(function(){l.lun_panel.css("display","none")},1e3),f.success({captchaVerification:n.data})):(l.bar_area.css({color:"#d9534f","border-color":"#d9534f"}),l.msg.text("验证失败"),setTimeout(function(){l.bar_area.css({color:"#000","border-color":"#ddd"}),Y()},400))})},400)),d<b&&(d=M(L(n,e)))}function B(){!function(n){const e=i.getElementsByTagName("head")[0],t=i.createElement("style");t.innerText=n,e.appendChild(t)}(".lun-dun-verifybox{\n    position: relative;\nuser-select:none;    box-sizing: border-box;\n    border-radius: 2px;\n    border: 1px solid #e4e7eb;\n    background-color: #fff;\n    box-shadow: 0 0 10px rgba(0,0,0,.3);\n    left: 50%;\n    top:50%;\n    transform: translate(-50%,-50%);\n}\n.lun-dun-verifybox-top{\n    padding: 0 15px;\n    height: 50px;\n    line-height: 50px;\n    text-align: left;\n    font-size: 16px;\n    color: #45494c;\n    border-bottom: 1px solid #e4e7eb;\n    box-sizing: border-box;\n}\n.lun-dun-verifybox-bottom{\n    padding: 15px;\n    box-sizing: border-box;\n}\n.lun-dun-verifybox-close{\n    position: absolute;\n    top: 13px;\n    right: 9px;\n    width: 24px;\n    height: 24px;\n    line-height: 24px;\n    text-align: center;\n    cursor: pointer;\n}\n.lun-dun-mask{\n    position: fixed;\n    top: 0;\n    left:0;\n    z-index: 1001;\n    width: 100%;\n    height: 100vh;\n    background: rgba(0,0,0,.3);\n    /* display: none; */\n    transition: all .5s;\n    display: none;\n}\n\n.lun-dun-verify-tips{\n    position: absolute;\n    /* display: none; */\n    left: 0px;\n    bottom:-35px;\n    width: 100%;\n    height: 30px;\n    /* transition: all .5s; */\n    line-height:30px;\n    color: #fff;\n    /* animation:move 1.5s linear; */\n}\n\n@keyframes move {\n    0%{\n        bottom:-35px;\n    }\n    50%,80%{\n        bottom:0px;\n    }\n    100%{\n        bottom:-35px;\n    }\n}\n\n.lun-dun-suc-bg{\n   background-color:rgba(92, 184, 92,.5);  \n   filter: progid:DXImageTransform.Microsoft.gradient(startcolorstr=#7f5CB85C, endcolorstr=#7f5CB85C);\n}\n.lun-dun-err-bg{\n   background-color:rgba(217, 83, 79,.5);  \n   filter: progid:DXImageTransform.Microsoft.gradient(startcolorstr=#7fD9534F, endcolorstr=#7fD9534F);\n}\n\n/*滑动验证码*/\n.lun-dun-verify-bar-area {\n    position: relative;\n    background: #FFFFFF;\n   \ttext-align: center;\n    -webkit-box-sizing: content-box;\n    -moz-box-sizing: content-box;\n    box-sizing: content-box;\n   \tborder: 1px solid #ddd;\n   \t-webkit-border-radius: 4px;\n}\n \n.lun-dun-verify-bar-area .lun-dun-verify-move-block {\n    position: absolute;\n    top: 0px;\n    left: 0;\n    background: #fff;\n    cursor: pointer;\n    -webkit-box-sizing: content-box;\n    -moz-box-sizing: content-box;\n    box-sizing: content-box;\n    box-shadow: 0 0 2px #888888;\n    -webkit-border-radius: 1px;\n}\n\n\n.lun-dun-verify-bar-area .lun-dun-verify-left-bar {\n    position: absolute;\n    top: -1px;\n    left: -1px;\n   \tbackground: #f0fff0;\n    cursor: pointer;\n    -webkit-box-sizing: content-box;\n    -moz-box-sizing: content-box;\n    box-sizing: content-box;\n    border: 1px solid #ddd;\n}\n\n.lun-dun-verify-img-panel {\n\tmargin:0;\n\t-webkit-box-sizing: content-box;\n    -moz-box-sizing: content-box;\n    box-sizing: content-box;\n\toverflow: hidden;\n\tborder-radius: 3px;\n\tposition: relative;\n}\n\n.lun-dun-verify-img-panel .lun-dun-verify-refresh {\n\twidth: 35px;\n\theight: 35px;\n\ttext-align:center;\n\tpadding: 5px;\n\tcursor: pointer;\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tz-index: 2;\n\tdisplay:flex;\n\tjustify-content: center;\n\t align-items: center;\n\t background: #00000030;\n}\n\n.lun-dun-verify-img-panel .lun-dun-icon-refresh {\n\tfont-size: 24px;\n\tcolor: #fff;\n}\n\n.lun-dun-verify-img-panel .lun-dun-verify-gap {\n\tbackground-color: #fff;\n\tposition: relative;\n\tz-index: 2;\n}\n\n.lun-dun-verify-bar-area .lun-dun-verify-move-block .lun-dun-verify-sub-block {\n\tposition: absolute;\n\t-webkit-user-drag: none;\n    text-align: center;\n\tz-index: 1;\n\t/* border: 1px solid #fff; */\n}\n\n.lun-dun-verify-bar-area .lun-dun-verify-move-block .lun-dun-verify-icon {\n\tfont-size: 18px;\n}\n\n.lun-dun-verify-bar-area .lun-dun-verify-msg {\n\tz-index : 3;\n}\n\n/*字体图标的css*/\n@font-face {font-family: \"iconfont\";\n  src: url('../fonts/iconfont.eot?t=1508229193188'); /* IE9*/\n  src: url('../fonts/iconfont.eot?t=1508229193188#iefix') format('embedded-opentype'), /* IE6-IE8 */\n  url('data:application/x-font-woff;charset=utf-8;base64,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') format('woff'),\n  url('../fonts/iconfont.ttf?t=1508229193188') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+*/\n  url('../fonts/iconfont.svg?t=1508229193188#iconfont') format('svg'); /* iOS 4.1- */\n}\n\n.lun-dun-iconfont {\n  font-family:\"iconfont\" !important;\n  font-size:16px;\n  font-style:normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.lun-dun-icon-check:before { content: \"\\e645\"; }\n\n.lun-dun-icon-close:before { content: \"\\e646\"; }\n\n.lun-dun-icon-right:before { content: \"\\e6a3\"; }\n\n:root{--loader-width: 35px;\n--loader-height: 35px;\n--loader-color-primary: gray;\n--loader-color-secondary: #eee;\n--line-width: 2px;\n--animation-duration: 1s;\n--loader-initial-scale: 0.1;}.loader,.loader:before,.loader:after{box-sizing: border-box;flex-grow: 0;flex-shrink: 0;}@keyframes circle-loader {0% {transform: rotate(0deg);}100% {transform: rotate(360deg);}}.loader.simple-circle {transform-origin: center center;border: var(--line-width, 4px) solid var(--loader-color-secondary, #fff);border-right-color: var(--loader-color-primary, #00f);width: var(--loader-width, 100px);height: var(--loader-height, 100px);border-radius: 80%;animation: circle-loader var(--animation-duration, 1s) infinite linear;}.lun-dun-icon-refresh:before { content: \"\\e6a4\"; }"),e.innerHTML="",r=function(){let n,e,t,o,i,r,a;const s="310px",l="155px",c={width:"50px",height:"50px"},d="310px",u="50px";return n=f.width?f.width:s,e=f.height?f.height:l,t=f.width?f.width:d,o=u,c&&(i=f.width?f.width:c.width,r=c.height),a="10px",{img_width:n,img_height:e,bar_width:t,bar_height:o,block_width:i,block_height:r,circle_radius:a}}();let n='<div class="lun-dun-mask" style="display: block"><div class="lun-dun-verifybox" style="width:'+(parseInt(r.img_width)+30)+'px"><div class="lun-dun-verifybox-top">请完成安全验证<span class="lun-dun-verifybox-close"><i class="lun-dun-iconfont lun-dun-icon-close"></i></span></div><div class="lun-dun-verifybox-bottom" style="padding:15px"><div style="position: relative;">';n+='<div class="lun-dun-verify-img-out" style="height:'+(parseInt(r.img_height)+5)+'px;"><div class="lun-dun-verify-img-panel" style="width:'+r.img_width+";height:"+r.img_height+';"><div class="lun-dun-verify-refresh" style="z-index:3"><i class="lun-dun-iconfont lun-dun-icon-refresh"></i></div><div class="lun-dun-center-panel" style="-webkit-user-drag:none"><canvas class="lun-dun-back-canvas"  style="position: relative; z-index: 1;" ></canvas></div></div></div><div class="lun-dun-verify-bar-area" style="margin-top:10px;width:'+r.bar_width+";height:"+r.bar_height+";line-height:"+r.bar_height+'"><span  class="lun-dun-verify-msg"></span></div>',n+='<div class="lun-dun-verify-refresh" style="z-index:3">',$(e).append(n),l={lun_panel:$(e).find(".lun-dun-mask"),lun_close:$(e).find(".lun-dun-verifybox-close"),lun_canvas:$(e).find(".lun-dun-back-canvas"),out_panel:$(e).find(".lun-dun-verify-img-out"),img_panel:$(e).find(".lun-dun-verify-img-panel"),center_panel:$(e).find(".lun-dun-center-panel"),bar_area:$(e).find(".lun-dun-verify-bar-area"),lun_refresh:$(e).find(".lun-dun-verify-refresh"),msg:$(e).find(".lun-dun-verify-msg")},$(e).css("position","relative"),l.lun_close.on("click",function(){l.lun_panel.css("display","none")}),l.lun_refresh.on("click",function(n){Y(),n.stopPropagation()})}function Y(){isLoading||(isLoading=!0,l.out_panel.append('<div class="lun-dun-loading" style="background-color:#B5B4B4;color:#fff;z-index:2;width:100%;height:230px;position:absolute;border-radius:2px;display: flex;justify-content: center;align-items: center;flex-direction: column;top:0px;left:0px;"><div class="loader simple-circle"></div><div style="margin-top:5px">加载中...</div></div>'),l.bar_area.append('<div class="bar_area-lun-dun-loading-text" style="background-color:#fff;color:#747373;z-index:2;width:100%;height:100%;position:absolute;border-radius:2px;display: flex;justify-content: center;align-items: center;flex-direction: column;top:0px;left:0px;"><div style="margin-top:5px">加载中...</div></div>'),function(n,e,t,o){$.ajax({type:"post",contentType:"application/json;charset=UTF-8",url:e+"/lun/hk1",data:JSON.stringify(w(n)),cache:!1,crossDomain:1==!i.all,success:function(n){"E200"===n.code&&(n.data=n.data?JSON.parse(y(n.data)):null),t(n)},fail:function(n){o(n)}})}({aid:u,ts:Date.now()},h,function(n){$(e).find(".lun-dun-loading").remove(),$(e).find(".bar_area-lun-dun-loading-text").remove(),isLoading=!1,"E200"===n.code?(p=n.data.token,function(s){switch($(e).find(".lun-dun-point-area").remove(),o.removeEventListener("touchmove",function(n){T(n)}),o.removeEventListener("mousemove",function(n){T(n)}),o.removeEventListener("touchend",function(){I()}),o.removeEventListener("mouseup",function(){I()}),l.move_block&&l.move_block.unbind(),l.sub_block&&l.sub_block.unbind(),l.img_panel&&l.img_panel.unbind(),s.captchaType){case"1":g=[],d=1,l.center_panel[0].innerHTML="",l.center_panel[0].innerHTML='<img src="" style="-webkit-user-drag:none" class="lun-dun-back-img" width="'+r.img_width+'" height="'+r.img_height+'">',l.bar_area[0].innerHTML="",l.bar_area[0].innerHTML='<span  class="lun-dun-verify-msg">请依次点击【'+s.wordList.join(" ")+"】</span>",$(e).find(".lun-dun-back-img")[0].src="data:image/png;base64,"+s.bgImage,b=s.wordList.length,l.img_panel.on("click",function(n){E(this,n)});break;case"2":l.center_panel[0].innerHTML="",l.center_panel[0].innerHTML='<span class="lun-dun-verify-tips"  class="lun-dun-suc-bg"></span><img src="" class="lun-dun-backImg" style="-webkit-user-drag: none;width:100%;height:'+r.img_height+'px;display:block">',l.bar_area[0].innerHTML="",l.bar_area[0].innerHTML='<span  class="lun-dun-verify-msg">向右滑动完成验证</span><div class="lun-dun-verify-left-bar" style="height:'+r.bar_height+";width:"+r.bar_height+'"><span class="lun-dun-verify-msg"></span><div  class="lun-dun-verify-move-block" style="height:'+r.bar_height+";width:"+r.bar_height+'"><i  class="lun-dun-verify-icon lun-dun-iconfont lun-dun-icon-right"></i><div class="lun-dun-verify-sub-block" style="-webkit-user-drag: none;height:'+r.img_height+"px;width:"+Math.floor(47*parseInt(r.img_width)/310)+"px;top:"+-(parseInt(r.img_height)+15)+'px"><img src="" class="lun-dun-bock-backImg" alt=""  style="-webkit-user-drag: none;width:100%;height:100%;display:block"></div></div></div>',$(e).find(".lun-dun-backImg")[0].src="data:image/png;base64,"+s.bgImage,$(e).find(".lun-dun-bock-backImg")[0].src="data:image/png;base64,"+s.frontImage,l.tips=$(e).find(".lun-dun-verify-tips"),l.sub_block=$(e).find(".lun-dun-verify-sub-block"),l.move_block=$(e).find(".lun-dun-verify-move-block"),l.left_bar=$(e).find(".lun-dun-verify-left-bar"),l.icon=$(e).find(".lun-dun-verify-icon"),l.move_block.onmouseover=function(){l.move_block.css({"border-color":"#337ab7"})},l.move_block.on("touchstart",function(n){_(n)}),l.move_block.on("mousedown",function(n){_(n)}),o.addEventListener("touchmove",function(n){T(n)}),o.addEventListener("mousemove",function(n){T(n)}),o.addEventListener("touchend",function(){I()}),o.addEventListener("mouseup",function(){I()});break;default:l.center_panel[0].innerHTML="",l.center_panel[0].innerHTML='<canvas class="lun-dun-back-canvas"  style="position: relative; z-index: 1;" ></canvas>',l.bar_area[0].innerHTML="",l.bar_area[0].innerHTML='<span  class="lun-dun-verify-msg">请绘制图中手势完成人机验证</span>',l.lun_canvas=$(e).find(".lun-dun-back-canvas");const a=new Image;a.src="data:image/png;base64,"+s.bgImage,a.onload=()=>{l.lun_canvas[0].width=a.naturalWidth,l.lun_canvas[0].height=a.naturalHeight;const i=l.lun_canvas[0].getContext("2d");i.lineWidth=5;const o=a.naturalWidth/5,r=a.naturalHeight/2;v=[];for(let t=0;t<s.wordList.length;t++){const l="0"===s.wordList[t]?9:s.wordList[t]-1,p=l<5?o*l:o*(l-5),n=l<5?0:r,c=t<5?o*t:o*(t-5),e=t<5?0:r;v.push({sx:c}),i.drawImage(a,p,n,o,r,c,e,o,r)}if(!l.lun_canvas[0]||!l.lun_canvas[0].getContext)return!1;isAllowDrawLine=!1,l.lun_canvas.on("touchstart",function(n){thereStart(n,i,l.lun_canvas[0])}),l.lun_canvas.on("mousedown",function(n){thereStart(n,i,l.lun_canvas[0])}),l.lun_canvas.on("mousedown",function(n){n.stopPropagation()}),l.lun_canvas[0].onmousemove=o=>{if(isAllowDrawLine){let n=windowToCanvas(l.lun_canvas[0],o.clientX,o.clientY),{x:e,y:t}=n;i.lineTo(e,t),i.stroke(),parseInt(t/(a.naturalHeight/2))+1==1?d=parseInt(e/(a.naturalWidth/5))+1:parseInt(t/(a.naturalHeight/2))+1==2&&(d=parseInt(e/(a.naturalWidth/5))+1+5),m.includes(d)||m.push(d)}},l.lun_canvas[0].onmouseup=function(){if(endMovetime=(new Date).getTime(),isAllowDrawLine=!1,t=[],Math.abs(c-endMovetime)/1e3<.4)return l.msg.text("验证失败"),void setTimeout(function(){l.bar_area.css({color:"#000","border-color":"#ddd"}),Y()},400);m.map(n=>{t.push({x:v[n-1].sx+n,y:v[n-1].sx})}),setTimeout(function(){const e={token:p,pointList:t,aid:u,ts:Date.now()};l.center_panel[0].innerHTML="",l.center_panel[0].innerHTML="<span>验证中</span>",k(e,h,function(n){console.log(e),"E200"===n.code?(l.bar_area.css({color:"#4cae4c","border-color":"#5cb85c"}),l.msg.text("验证成功"),l.img_panel.unbind("click"),setTimeout(function(){l.lun_panel.css("display","none")},1e3),f.success({captchaVerification:n.data})):(l.bar_area.css({color:"#d9534f","border-color":"#d9534f"}),l.msg.text("验证失败"),setTimeout(function(){l.bar_area.css({color:"#000","border-color":"#ddd"}),Y()},400))})},400)}}}}(n.data)):l.msg.text(n.msg)}))}isLoading=!1,isValidating=!1,windowToCanvas=(n,e,t)=>{let o=n.getBoundingClientRect();return{x:e-o.left*(n.width/o.width),y:t-o.top*(n.height/o.height)}},thereStart=(n,e,t)=>{m=[],isAllowDrawLine=!0;let o=windowToCanvas(t,n.clientX,n.clientY),{x:i,y:r}=o;e.moveTo(i,r),c=(new Date).getTime()},Lunaptcha={init:function(n){e=i.getElementById(n.containerId),h=n.baseUrl,u=n.aId,f=n,B(),Y()}},o.Lunaptcha=Lunaptcha}(window,document)}]);